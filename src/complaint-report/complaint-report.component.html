<!-- Code for the CACC Equipment Falure Report Page -->

<!-- Header -->
<div class="container">
  <header align="center">
    <!-- Ontario Logo -->
    <img class="logo" src="OntarioMOH.png" alt="Ontario MOH Logo" />

    <!-- Title -->
    <div name="title">
      <h1>
        CORTS - CACC Operational <br />
        Reports Tracking System
      </h1>
      <h3>454 - MIS CACC</h3>
    </div>

    <!-- Navigation Buttons -->
    <div name="nav">
      <button class="navBtn" routerLink="/mainpage">Start Page</button>
      <button class="navBtn" routerLink="/query">Search</button>
      <button class="navBtn" routerLink="/logout">Logout</button>
    </div>
  </header>
</div>

<!----------------------------------------------------------------->

<form
  id="frmCOR"
  method="post"
  action="COR.ASP?WCI=tpl_cor&amp;WCE=Submit&amp;WCU="
  target="_top"
>
  <!-- Basic Information (White Card) -->
  <app-basic-information
    [corNumber]="corNumber"
    [routedToSelection]="routedToSelection"
    (routedToSelectionChangeDetect)="updateRoutedToSelection($event)"
    (statusIDChange)="updateStatusID($event)"
  >
  </app-basic-information>
  <!-- End of Basic Information (White Card)-->

  <!----------------------------------------------------------------->

  <!-- Complaint Details (White Card)-->
  <div class="container">
    <h4 class="section-title">Complaint Details:</h4>

    <!-- Complaint Details Content -->
    <div class="grid-container-2c">
      <div class="grid-column">
        <!-- Complaint/Inquiry -->
        <div class="grid-item">
          <label class="req-input" for="complaint-type"
            >Complaint/Inquiry*</label
          >
          <select
            [(ngModel)]="complaintTypeKey"
            name="complaintType"
            (change)="complaintTypeChange(complaintTypeKey)"
            required
          >
            <option value="">-- Select Complaint Type --</option>
            <option
              *ngFor="let type of complaintTypeList"
              [value]="type.compalintTypeKey"
            >
              {{ type.displayName }}
            </option>
          </select>
        </div>

        <!-- Date/Time of Complaint -->
        <div class="grid-item">
          <label class="req-input" for="complaint-date"
            >Date/Time of Complaint*</label
          >
          <input
            type="datetime-local"
            id="complaint-date"
            [(ngModel)]="complaintDateTime"
            name="complaintDateTime"
            required
          />
        </div>
      </div>

      <!-- Complaint Details or Other Info -->
      <div class="grid-item">
        <label class="req-input">Complaint Details or Other Info*</label>
        <textarea
          rows="5"
          maxlength="255"
          [(ngModel)]="complaintCommentText"
          name="complaintCommentText"
          required
        ></textarea>
      </div>
    </div>
    <!-- End of Complaint Details Content -->

    <h4 class="section-title">Contact Information:</h4>

    <!-- Contact Information -->
    <div class="grid-container">
      <!-- Last Name -->
      <div class="grid-item">
        <label for="last-name">Last Name</label>
        <input
          type="text"
          id="last-name"
          [(ngModel)]="lastName"
          name="lastName"
        />
      </div>

      <!-- First Name -->
      <div class="grid-item">
        <label for="first-name">First Name</label>
        <input
          type="text"
          id="first-name"
          [(ngModel)]="firstName"
          name="firstName"
        />
      </div>

      <!-- Phone # -->
      <div class="grid-item">
        <label for="phone">Phone #</label>
        <input
          type="text"
          id="phone"
          [(ngModel)]="phoneNumber"
          name="phoneNumber"
        />
      </div>
    </div>
    <!-- End of Contact Information-->
  </div>
  <!-- End of Complaint Details (White Card)-->

  <!----------------------------------------------------------------->

  <!-- Narrative -->
  <div class="container">
    <h4>Narrative:</h4>
    <hr />

    <!-- Narative Table -->
    <table width="100%">
      <thead>
        <tr>
          <th width="10%">Date</th>
          <th width="13%">Time</th>
          <th width="10%">User</th>
          <th>Comments</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let entry of combinedEntries">
          <td>{{ entry.date }}</td>
          <td>{{ entry.time }}</td>
          <td>{{ entry.user }}</td>
          <td
            [ngClass]="{
              'copmlaint-comment': entry.type === 'copmlaint',
              'narrative-comment': entry.type === 'narrative'
            }"
            name="incidentComment"
            [innerHTML]="entry.comment"
          >
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Narrative Container for content under the table -->
    <div class="narrative-container">
      <!-- Narrative Comments -->
      <div class="grid-item">
        <label>Comments</label>
        <textarea
          rows="5"
          maxlength="255"
          [(ngModel)]="narrativeCommentText"
          name="narrativeCommentText"
        ></textarea>
      </div>

      <!-- Form Action Buttons -->
      <div class="form-actions">
        <button class="btn primary" (click)="saveChanges()">
          Save Changes
        </button>
        <button class="btn primary" (click)="saveChangesExit()">
          Save Changes and Exit
        </button>
        <button class="btn warn" (click)="reload()">Reload Page</button>
      </div>
    </div>
    <!-- End Narrative Container -->
  </div>
  <!-- End of Narrative (White Card)-->
</form>
